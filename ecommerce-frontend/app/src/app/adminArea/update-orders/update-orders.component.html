<div class="w-full py-6 px-6 bg-gray-50 min-h-screen">
  <!-- Header Section -->
  <div class="mb-8">
    <h1 class="text-3xl font-bold text-gray-800 mb-2">
      <i class="fas fa-shopping-cart mr-3 text-blue-600"></i>Orders Management
    </h1>
    <p class="text-gray-600">View and update order status for your e-commerce store</p>
  </div>

  <!-- Statistics Cards -->
  <div class="grid grid-cols-1 md:grid-cols-4 gap-6 mb-8">
    <div class="bg-white p-6 rounded-xl shadow-lg border-l-4 border-blue-500">
      <div class="flex items-center justify-between">
        <div>
          <p class="text-sm font-medium text-gray-600">Total Orders</p>
          <p class="text-3xl font-bold text-gray-900">{{ totalOrders }}</p>
        </div>
        <div class="bg-blue-100 p-3 rounded-full">
          <i class="fas fa-shopping-cart text-2xl text-blue-600"></i>
        </div>
      </div>
    </div>
    <div class="bg-white p-6 rounded-xl shadow-lg border-l-4 border-orange-500">
      <div class="flex items-center justify-between">
        <div>
          <p class="text-sm font-medium text-gray-600">Pending Orders</p>
          <p class="text-3xl font-bold text-gray-900">{{ pendingOrders }}</p>
        </div>
        <div class="bg-orange-100 p-3 rounded-full">
          <i class="fas fa-clock text-2xl text-orange-600"></i>
        </div>
      </div>
    </div>
    <div class="bg-white p-6 rounded-xl shadow-lg border-l-4 border-green-500">
      <div class="flex items-center justify-between">
        <div>
          <p class="text-sm font-medium text-gray-600">Completed Orders</p>
          <p class="text-3xl font-bold text-gray-900">{{ completedOrders }}</p>
        </div>
        <div class="bg-green-100 p-3 rounded-full">
          <i class="fas fa-check-circle text-2xl text-green-600"></i>
        </div>
      </div>
    </div>
    <div class="bg-white p-6 rounded-xl shadow-lg border-l-4 border-purple-500">
      <div class="flex items-center justify-between">
        <div>
          <p class="text-sm font-medium text-gray-600">Total Revenue</p>
          <p class="text-3xl font-bold text-gray-900">${{ totalRevenue }}</p>
        </div>
        <div class="bg-purple-100 p-3 rounded-full">
          <i class="fas fa-dollar-sign text-2xl text-purple-600"></i>
        </div>
      </div>
    </div>
  </div>

  <!-- Orders Table -->
  <div class="bg-white rounded-xl shadow-lg overflow-hidden">
    <div class="p-6 border-b border-gray-200">
      <h2 class="text-xl font-semibold text-gray-800">
        <i class="fas fa-list-alt mr-2 text-green-600"></i>All Orders
      </h2>
    </div>
    
    <div class="overflow-x-auto">
      <table class="w-full table-auto">
        <thead class="bg-gray-100 text-left">
          <tr>
            <th class="p-3 text-gray-700 font-semibold border-b border-gray-300">
              <i class="fas fa-hashtag mr-2"></i>Order ID
            </th>
            <th class="p-3 text-gray-700 font-semibold border-b border-gray-300">
              <i class="fas fa-user mr-2"></i>User Details
            </th>
            <th class="p-3 text-gray-700 font-semibold border-b border-gray-300">
              <i class="fas fa-box mr-2"></i>Products
            </th>
            <th class="p-3 text-gray-700 font-semibold border-b border-gray-300">
              <i class="fas fa-info-circle mr-2"></i>Status
            </th>
            <th class="p-3 text-gray-700 font-semibold border-b border-gray-300">
              <i class="fas fa-calendar mr-2"></i>Date
            </th>
            <th class="p-3 text-gray-700 font-semibold border-b border-gray-300">
              <i class="fas fa-cog mr-2"></i>Actions
            </th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let order of allorders" class="hover:bg-gray-50 transition-colors">
            <td class="p-3 border-b border-gray-200 font-mono text-sm">
              <i class="fas fa-hashtag mr-1 text-gray-400"></i>{{ order._id }}
            </td>
            <td class="p-3 border-b border-gray-200">
              <div class="space-y-1">
                <div class="font-semibold text-gray-800">
                  <i class="fas fa-id-card mr-1 text-blue-500"></i>
                  <span class="text-blue-600">ID:</span> {{ order.user?._id || 'N/A' }}
                </div>
                <div class="font-semibold text-gray-800">
                  <i class="fas fa-user-circle mr-1 text-blue-500"></i>
                  <span class="text-blue-600">Name:</span> {{ order.user?.name || 'N/A' }}
                </div>
                <div class="text-sm text-gray-600">
                  <i class="fas fa-envelope mr-1 text-green-500"></i>
                  <span class="text-blue-600">Email:</span> {{ order.user?.email || 'N/A' }}
                </div>
                <div class="text-sm text-gray-600">
                  <i class="fas fa-phone mr-1 text-purple-500"></i>
                  <span class="text-blue-600">Phone:</span> {{ order.user?.phone || 'N/A' }}
                </div>
                <div class="text-sm text-gray-600">
                  <i class="fas fa-home mr-1 text-orange-500"></i>
                  <span class="text-blue-600">Address:</span> {{ order.user?.address?.fulladdress || 'N/A' }}
                </div>
                <div class="text-sm text-gray-600">
                  <i class="fas fa-shipping-fast mr-1 text-red-500"></i>
                  <span class="text-blue-600">Shipping:</span> {{ order.shippingAddress || 'N/A' }}
                </div>
              </div>
            </td>
            <td class="p-3 border-b border-gray-200">
              <ul class="list-disc pl-4 space-y-2">
                <li *ngFor="let p of order.products" class="text-sm">
                  <div class="font-semibold text-gray-800">
                    <i class="fas fa-tag mr-1 text-green-500"></i>
                    <span class="text-green-600">Product ID:</span> {{ p.product?._id || 'N/A' }}
                  </div>
                  <div class="font-semibold text-gray-800">
                    <i class="fas fa-box mr-1 text-green-500"></i>
                    <span class="text-green-600">Name:</span> {{ p.product?.name || 'N/A' }}
                  </div>
                  <div class="text-sm text-gray-600">
                    <i class="fas fa-align-left mr-1 text-green-500"></i>
                    <span class="text-green-600">Description:</span> {{ p.product?.desc || 'N/A' }}
                  </div>
                  <div class="text-sm text-gray-600">
                    <i class="fas fa-dollar-sign mr-1 text-green-500"></i>
                    <span class="text-green-600">Unit Price:</span> {{ p.product?.price || 'N/A' }}$
                  </div>
                  <div class="text-sm text-gray-600">
                    <i class="fas fa-sort-numeric-up mr-1 text-green-500"></i>
                    <span class="text-green-600">Quantity:</span> {{ p.quantity || 'N/A' }}
                  </div>
                  <div class="text-sm text-gray-600">
                    <i class="fas fa-calculator mr-1 text-green-500"></i>
                    <span class="text-green-600">Total Price:</span> {{ p.price || 'N/A' }}$
                  </div>
                  <div class="text-sm text-gray-600" *ngIf="p.product?.imgURL">
                    <i class="fas fa-image mr-1 text-green-500"></i>
                    <span class="text-green-600">Image:</span> 
                    <img [src]="'http://localhost:3000/' + p.product.imgURL" alt="Product" class="w-8 h-8 object-cover rounded inline-block ml-1">
                  </div>
                </li>
              </ul>
            </td>
            <td class="p-3 border-b border-gray-200">
              <span
                [class.text-green-600]="order.status === 'delivered'"
                [class.text-blue-600]="order.status === 'placed'"
                [class.text-yellow-600]="order.status === 'preparing'"
                [class.text-orange-600]="order.status === 'shipped'"
                [class.text-red-600]="order.status === 'cancelled'"
                class="font-bold flex items-center"
              >
                <i [class]="order.status === 'delivered' ? 'fas fa-check-circle mr-1' : 
                           order.status === 'placed' ? 'fas fa-clock mr-1' :
                           order.status === 'preparing' ? 'fas fa-cog mr-1' :
                           order.status === 'shipped' ? 'fas fa-shipping-fast mr-1' :
                           'fas fa-times-circle mr-1'"></i>
                {{ order.status }}
              </span>
            </td>
            <td class="p-3 border-b border-gray-200">
              <i class="fas fa-clock mr-2 text-gray-400"></i>{{ order.placedAt | date:'medium' }}
            </td>
            <td class="p-3 border-b border-gray-200">
              <select
                class="border rounded-lg px-3 py-2 mr-2 focus:outline-none focus:ring-2 focus:ring-blue-400 bg-white shadow-sm"
                [value]="order.status"
                #statusSelect
                (change)="updateorder(order._id, statusSelect.value)"
              >
                <option value="placed">Placed</option>
                <option value="preparing">Preparing</option>
                <option value="shipped">Shipped</option>
                <option value="delivered">Delivered</option>
                <option value="cancelled">Cancelled</option>
              </select>
            </td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>
</div>
