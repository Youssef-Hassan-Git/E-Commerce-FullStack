<div class="container mx-auto px-4 py-6">
  <h2 class="text-2xl font-bold mb-6 text-center">My Products</h2>

  <div class="overflow-x-auto">
  <table class="w-full table-auto border border-gray-300 rounded-lg shadow-md overflow-hidden">
      <thead>
        <tr class="bg-gray-100 text-gray-700 text-left text-sm uppercase">
          <th class="px-4 py-3">Image</th>
          <th class="px-4 py-3">Name</th>
          <th class="px-4 py-3">Description</th>
          <th class="px-4 py-3">Price</th>
          <th class="px-4 py-3">Brand</th>
          <th class="px-4 py-3">Category</th>
          <th class="px-4 py-3">Subcategory</th>
          <th class="px-4 py-3">Stock</th>
          <th class="px-4 py-3">Actions</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let product of myproducts" class="border-t hover:bg-gray-50">
          <td class="px-4 py-3">
            <img
              [src]="getImageUrl(product.imgURL)"
              alt="{{ product.name }}"
              class="h-12 w-12 rounded object-cover transition-transform duration-300 hover:scale-105"
            />
          </td>
          <td class="px-4 py-3">{{ product.name }}</td>
          <td class="px-4 py-3">{{ product.desc }}</td>
          <td class="px-4 py-3">{{ product.price }}$</td>
          <td class="px-4 py-3">{{ product.brandId?.brandName || 'N/A' }}</td>
          <td class="px-4 py-3">{{ product.categoryId?.categoryName || 'N/A' }}</td>
          <td class="px-4 py-3">{{ product.subCategoryId?.subCategoryName || 'N/A' }}</td>
          <td class="px-4 py-3">{{ product.stock }}</td>
          <td class="px-2 py-3 space-x-2">
            <button
              (click)="editProduct(product._id)"
              class="bg-yellow-500 text-white px-3 py-1 rounded hover:bg-yellow-600 text-sm"
            >
            <i class="fa-solid fa-pen"></i>
              Edit
            </button>
            <button
              (click)="deleteProduct(product._id)"
              class="bg-red-500 text-white px-3 py-1 rounded hover:bg-red-600 text-sm"
            >
            <i class="fa-solid fa-trash"></i>
              Delete
            </button>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="flex justify-center items-center mt-6 space-x-2">
    <button 
      (click)="previousPage()"
      [disabled]="pagination.page <= 1"
      class="px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600 disabled:opacity-50 disabled:cursor-not-allowed"
    >
      Previous
    </button>
    
    <span class="px-4 py-2">{{ pagination.page }} / {{ pagination.totalPages }}</span>
    
    <button 
      (click)="nextPage()"
      [disabled]="pagination.page >= pagination.totalPages"
      class="px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600 disabled:opacity-50 disabled:cursor-not-allowed"
    >
      Next
    </button>
  </div>

  <div class="text-center mt-4 text-gray-600">
    Showing {{ myproducts.length }} of {{ pagination.totalResult }} products
  </div>
</div>
